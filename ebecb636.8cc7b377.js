(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{79:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return o})),t.d(n,"rightToc",(function(){return b})),t.d(n,"default",(function(){return r}));var a=t(3),i=t(7),c=(t(0),t(86)),l={},o={unversionedId:"lang-mc/The-mc-language",id:"lang-mc/The-mc-language",isDocsHomePage:!1,title:"The-mc-language",description:"Contexts",source:"@site/docs/lang-mc/The-mc-language.md",slug:"/lang-mc/The-mc-language",permalink:"/docs/lang-mc/The-mc-language",editUrl:"https://github.com/mc-build/docs/docs/lang-mc/The-mc-language.md",version:"current",sidebar:"docs",previous:{title:"Getting-Started",permalink:"/docs/lang-mc/Getting-Started"},next:{title:"The-mcb-CLI",permalink:"/docs/lang-mc/The-mcb-CLI"}},b=[{value:"While",id:"while",children:[]},{value:"Async While",id:"async-while",children:[]},{value:"Until",id:"until",children:[]},{value:"Inline JS block",id:"inline-js-block",children:[]},{value:"Multiline JS block",id:"multiline-js-block",children:[]},{value:"!IF",id:"if",children:[]},{value:"Shorthand !IF",id:"shorthand-if",children:[]},{value:"LOOP",id:"loop",children:[]}],s={rightToc:b};function r(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"contexts"},"Contexts"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Folder context refers to where functions and directories can be defined."),Object(c.b)("li",{parentName:"ul"},"Function context refers to syntax inside of functions where commands can be written."),Object(c.b)("li",{parentName:"ul"},"Macro context refers to the folder context inside of ",Object(c.b)("inlineCode",{parentName:"li"},".mcm")," files")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"#!foo.mc\n# Folder context\ndir {\n    # Folder context\n    function bar {\n        # Function context\n        say Hello\n    }\n}\n# Folder context\nfunction bas {\n    # Function context\n    say World!\n}\n")),Object(c.b)("h1",{id:"functions"},"Functions"),Object(c.b)("p",null,"You can create functions using the ",Object(c.b)("inlineCode",{parentName:"p"},"function")," keyword:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"function foo {\n    say I am called via `function mc_file_name:foo`\n}\n")),Object(c.b)("p",null,"Functions can only be defined within ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mc-build/lang-mc/wiki/The-mc-language/#contexts"}),"Folder context")),Object(c.b)("h1",{id:"directories"},"Directories"),Object(c.b)("p",null,"You can create sub directories using the ",Object(c.b)("inlineCode",{parentName:"p"},"dir")," keyword:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"dir foo {\n    function bar {\n        say I am called via `function mc_file_name:foo/bar`\n    }\n    dir bar {\n        function bas {\n            say I am called via `function mc_file_name:foo/bar/bas`\n        }\n    }\n}\n")),Object(c.b)("p",null,"Directories can only be defined within ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mc-build/lang-mc/wiki/The-mc-language/#contexts"}),"Folder context")),Object(c.b)("h1",{id:"function-blocks"},"Function Blocks"),Object(c.b)("p",null,"Function blocks are used to define groups of commands that will be wrapped up into a function on compile-time."),Object(c.b)("p",null,"Using the ",Object(c.b)("inlineCode",{parentName:"p"},"block")," keyword will define a block and inline the generated function call:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'block {\n    scoreboard players set @s value 1\n    tellraw @s {"score":{"objective":"value","name":"@s"}}\n}\n# When this compiles it will inline something similar to this:\n# function mc_file_name:__generated__/block/0\n\n# The block keyword can be omitted, but recommended for readability in most cases.\n# This will compile the same as above\n{\n    scoreboard players set @s value 1\n    tellraw @s {"score":{"objective":"value","name":"@s"}}\n}\n')),Object(c.b)("p",null,"Function blocks can also be defined at the end of execute commands:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'execute if score @s value matches 1 run block {\n    tellraw @s "Value is 1"\n}\n# When this compiles it will inline something similar to this:\n# execute if score @s value matches 1 run function mc_file_name:__generated__/execute/0\n\n# Again the block keyword can be omitted:\nexecute if score @s value matches 1 run {\n    tellraw @s "Value was 1"\n    scoreboard players set @s value 0\n}\n')),Object(c.b)("p",null,"Keep in mind that if you do not omit the ",Object(c.b)("inlineCode",{parentName:"p"},"block")," keyword after an ",Object(c.b)("inlineCode",{parentName:"p"},"execute")," command it will always define a function, even if the block only contains a single command. If omitted and only 1 command is inside the block instead of making a function it will just append that command to the end of the ",Object(c.b)("inlineCode",{parentName:"p"},"execute")," command. For example:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'execute if score @s value matches 1 run {\n    tellraw @s "Value is 1"\n}\n')),Object(c.b)("p",null,"Would compile to ",Object(c.b)("inlineCode",{parentName:"p"},'execute if score @s value matches 1 run tellraw @s "Value was 1"')),Object(c.b)("p",null,"Function blocks can also be named using the ",Object(c.b)("inlineCode",{parentName:"p"},"name")," keyword:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"block {\n    name foo\n    say hi\n}\n")),Object(c.b)("p",null,"This allows for manual naming to remove the ",Object(c.b)("inlineCode",{parentName:"p"},"__generated__")," folders from your datapack if you so choose."),Object(c.b)("p",null,"Function blocks can only be defined and used within ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mc-build/lang-mc/wiki/The-mc-language/#contexts"}),"Function context")),Object(c.b)("h1",{id:"clocks"},"Clocks"),Object(c.b)("p",null,"Clocks are an easy way of running a function every x amount of time.\nFor instance you could create a clock that runs every 5 seconds like this:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"clock 5s {\n    say I run every 5 seconds!\n}\n")),Object(c.b)("p",null,"The time argument takes a ",Object(c.b)("inlineCode",{parentName:"p"},"schedule")," command time input (",Object(c.b)("inlineCode",{parentName:"p"},"5s"),", ",Object(c.b)("inlineCode",{parentName:"p"},"10t"),", ",Object(c.b)("inlineCode",{parentName:"p"},"1d"),")"),Object(c.b)("p",null,"Clocks can only be defined and used within ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mc-build/lang-mc/wiki/The-mc-language/#contexts"}),"Folder context")),Object(c.b)("h1",{id:"while-async-while-and-until"},"While, Async While, and Until"),Object(c.b)("h3",{id:"while"},"While"),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"while")," loop can be used to run a set of commands while a condition (defined as an ",Object(c.b)("inlineCode",{parentName:"p"},"execute")," subcommand chain) is true. It will halt the execution of the function until the loop exits:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'scoreboard players set #i 0\nwhile(if score #i value matches ..10) {\n    tellraw @a [{"text":"loop "},{"score":{"name":"#i","objective":"value"}}]\n    scoreboard players add #i value 1\n}\nsay I will run once the while loop has ended!\n')),Object(c.b)("p",null,"This will loop until the value of ",Object(c.b)("inlineCode",{parentName:"p"},"#i")," is greater than ",Object(c.b)("inlineCode",{parentName:"p"},"10"),", and then it will exit the loop and continue running the function"),Object(c.b)("h3",{id:"async-while"},"Async While"),Object(c.b)("p",null,"The async while loop will run a set of commands every x amount of time until it's condition is true without halting the execution of the function."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'scoreboard players set #i value 0\nasync while(if score #i value matches ..10,5t) {\n    scoreboard players add #i value 1\n    tellraw @a [{"text":"loop "},{"score":{"name":"#i","objective":"value"}}]\n}\nsay I will run immediately after the first while loop\n')),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"async while")," loop can also have a ",Object(c.b)("inlineCode",{parentName:"p"},"finally")," function block defined that will execute it's contents once the loop exits:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'scoreboard players set #i value 0\nasync while(if score #i value matches ..10,5t) {\n    tellraw @a [{"text":"loop "},{"score":{"name":"#i","objective":"value"}}]\n    scoreboard players add #i value 1\n} finally {\n    say I will run once the loop exits!\n}\nsay I will run immediately after the first while loop\n')),Object(c.b)("h3",{id:"until"},"Until"),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"until")," loop will run a set of commands every x amount of time until the condition is met. It will not halt function execution:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'scoreboard players set #i value 0\nuntil(if score #i value matches 10,1s) {\n    tellraw @a [{"text":"loop "},{"score":{"name":"#i","objective":"value"}}]    \n    scoreboard players add #i value 1\n}\n')),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"blocking until")," and the ",Object(c.b)("inlineCode",{parentName:"p"},"finally")," block are planned but not implemented as of yet."),Object(c.b)("p",null,"while, async while, and until can only be defined and used within ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mc-build/lang-mc/wiki/The-mc-language/#contexts"}),"Function context")),Object(c.b)("h1",{id:"multiline-commands"},"Multiline Commands"),Object(c.b)("p",null,Object(c.b)("em",{parentName:"p"},"WARNING")," This feature is ",Object(c.b)("em",{parentName:"p"},"experimental"),". It may not always work the way you expect"),Object(c.b)("p",null,"You can use ",Object(c.b)("inlineCode",{parentName:"p"},"()")," curved brackets to surround a command to allow newlines in that command:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"(\n    execute\n    if block ~ ~ ~ stone\n    if block ~ ~1 ~ stone\n    run say hi\n)\n# This would compile to:\nexecute if block ~ ~ ~ stone if block ~ ~1 ~ stone run say hi\n")),Object(c.b)("p",null,"Multiline commands can only be defined and used within ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mc-build/lang-mc/wiki/The-mc-language/#contexts"}),"Function context")),Object(c.b)("h1",{id:"inline--multiline-js-blocks"},"Inline & Multiline JS Blocks"),Object(c.b)("h3",{id:"inline-js-block"},"Inline JS block"),Object(c.b)("p",null,"Inline JS blocks are JS code wrapped in ",Object(c.b)("inlineCode",{parentName:"p"},"<%")," and ",Object(c.b)("inlineCode",{parentName:"p"},"%>"),". Whatever the JS inside of those brackets returns will be what is inserted into the command/line:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'# For instance if the value of config.text is "hello" than this code:\nsay <%config.text%>\n# Will compile to this:\nsay hello\n')),Object(c.b)("p",null,"Inline JS blocks cannot span multiple lines."),Object(c.b)("h3",{id:"multiline-js-block"},"Multiline JS block"),Object(c.b)("p",null,"Multiline JS blocks are JS code wrapped in ",Object(c.b)("inlineCode",{parentName:"p"},"<%%")," and ",Object(c.b)("inlineCode",{parentName:"p"},"%%>"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"<%%\n    for (let i=0; i<10; i++) {\n        emit(`say ${i}`)\n    }\n%%>\n")),Object(c.b)("p",null,"The opening and closing brackets must be the only thing on their line. Only whitespace is allowed before them"),Object(c.b)("p",null,"Inline and Multiline JS blocks can only be defined and used within ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mc-build/lang-mc/wiki/The-mc-language/#contexts"}),"Function context")),Object(c.b)("h1",{id:"compile-time-logic"},"Compile time logic"),Object(c.b)("h3",{id:"if"},"!IF"),Object(c.b)("p",null,"The compile time if statement can be used to omit code and/or functions if a certain condition is not met. For example if you didn't want a dev function to export unless a flag was true in the config you could do something like this:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"!IF(config.dev) {\n    function dev_tool {\n        say I'm a dev function. Yay!\n    }\n}\n")),Object(c.b)("p",null,"This would only generate that function IF config.dev is set to ",Object(c.b)("inlineCode",{parentName:"p"},"true"),"."),Object(c.b)("h3",{id:"shorthand-if"},"Shorthand !IF"),Object(c.b)("p",null,"Same as !IF, but less to type:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"!config.dev{\n    say hi\n}\n")),Object(c.b)("h3",{id:"loop"},"LOOP"),Object(c.b)("p",null,"Compile time LOOP allows you to generate code based off of a JS iterable value. The second argument is the loop variable that will be passed to the context inside the loop."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"# This will generate 10 functions, loop_0-9 that say their name when ran\nLOOP(10,i){\n    function loop_<%i%> {\n        say loop_<%i%>\n    }\n}\n")),Object(c.b)("p",null,"Compile time logic (!IF shorthand compile time if, and LOOP) can be defined and used within ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mc-build/lang-mc/wiki/The-mc-language/#contexts"}),"Function and Folder context")),Object(c.b)("h1",{id:"execute-if-else-blocks"},"Execute if else blocks"),Object(c.b)("p",null,"Execute if else blocks allow you to write run-time if else logic with ease:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"execute(if score #i value matches 1){\n    say The value is 1\n}else execute(if score #i value matches 2){\n    say The value is 2\n}else{\n    say I don't know what value it is, but it ain't 1 or 2 ',:I\n}\n")),Object(c.b)("p",null,"Execute if else blocks can be defined and used within ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mc-build/lang-mc/wiki/The-mc-language/#contexts"}),"Function context")),Object(c.b)("h1",{id:"macros"},"macros"),Object(c.b)("p",null,"You can only define macros in .mcm files."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"# mess.mcm\nmacro mess {\n  say $$0\n  scoreboard players set $$1 $$2 10\n}\n")),Object(c.b)("p",null,"Macros must be imported in order to be referenced."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"# foo.mc\nimport ./mess.mcm\n\nfunction bar {\n  macro mess Hello! @s objective\n  say Hello again!\n  # The macro keyword is optional in .mc files!\n  mess Uhoh .loop v\n}\n")),Object(c.b)("p",null,"The code above produces this:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"# function foo:bar\nsay Hello!\nscoreboard players set @s objective 10\nsay Hello again!\nsay Uhoh\nscoreboard players set .loop v 10\n")),Object(c.b)("p",null,"JS inside of macros has a few extra globals:"),Object(c.b)("h4",{id:"emit-emittext-string-void"},"emit ",Object(c.b)("inlineCode",{parentName:"h4"},"emit(text: string): void")),Object(c.b)("p",null,"Emits text directly to the output function."),Object(c.b)("h4",{id:"args-args-arraytype-string-content-string"},"args ",Object(c.b)("inlineCode",{parentName:"h4"},"args: Array<{type: string, content: string}>")),Object(c.b)("p",null,"A list of arguments passed to the macro"))}r.isMDXComponent=!0}}]);